# Dockerfile برای بک‌اند (Node.js)

# مرحله 1: ساخت ایمیج بیس (Base Image)
# از ایمیج رسمی Node.js استفاده می‌کنیم. نسخه LTS توصیه می‌شود.
FROM node:20-alpine

# مرحله 2: تنظیم دایرکتوری کاری (Working Directory) در داخل کانتینر
# تمام فایل‌های پروژه در این دایرکتوری کپی می‌شوند.
WORKDIR /app

# مرحله 3: کپی کردن فایل‌های package.json و package-lock.json
# این کار به داکر اجازه می‌دهد تا وابستگی‌ها را کش (cache) کند.
COPY package*.json ./

# مرحله 4: نصب وابستگی‌های پروژه
# از npm install برای نصب پکیج‌ها استفاده می‌کنیم.
RUN npm install

# مرحله 5: کپی کردن بقیه فایل‌های پروژه
# تمام فایل‌های منبع (source code) بک‌اند را به دایرکتوری کاری کپی می‌کنیم.
COPY . .

# مرحله 6: اکسپوز کردن پورت (Expose Port)
# پورتی که برنامه Node.js شما در داخل کانتینر به آن گوش می‌دهد.
# این باید با PORT در فایل .env شما مطابقت داشته باشد (پیش‌فرض 5000).
EXPOSE 5000

# مرحله 7: دستور اجرای برنامه
# دستوری که هنگام اجرای کانتینر اجرا می‌شود.
# npm start معمولاً به "node server.js" اشاره دارد.
CMD ["npm", "start"]
